
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Dropwizard guice integration">
      
      
        <link rel="canonical" href="https://xvik.github.io/dropwizard-guicey/4.0.1/guide/bundles/">
      
      
        <meta name="author" content="Vyacheslav Rusakov">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      
      <meta name="generator" content="mkdocs+mkdocs-material#1.0.3">
    
    
      
        <title>Bundles (Guicey) - Dropwizard-guicey</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-facb31f4a3.js"></script>
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-f3ab63f78a.css">
      
      
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Dropwizard-guicey" class=" md-icon md-icon--home  md-header-nav__button">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  User guide
                </span>
              
            
            Bundles (Guicey)
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            
              


  


  <a href="https://github.com/xvik/dropwizard-guicey" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      dropwizard-guicey
    </div>
  </a>

            
          </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <i class=" md-icon md-icon--home  md-nav__button">
      
    </i>
    Dropwizard-guicey
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/xvik/dropwizard-guicey" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      dropwizard-guicey
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  <li class="md-nav__item">
    
      <a href="../.." title="Home" class="md-nav__link">
        Home
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../getting-started/" title="Getting started" class="md-nav__link">
        Getting started
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      User guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-3">
        User guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../configuration/" title="Configuration" class="md-nav__link">
        Configuration
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../lifecycle/" title="Integration lifecycle" class="md-nav__link">
        Integration lifecycle
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../injector/" title="Injector" class="md-nav__link">
        Injector
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../module-autowiring/" title="Module autowiring" class="md-nav__link">
        Module autowiring
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../bindings/" title="Bindings" class="md-nav__link">
        Bindings
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../scan/" title="Classpath scan" class="md-nav__link">
        Classpath scan
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../installers/" title="Installers" class="md-nav__link">
        Installers
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../ordering/" title="Ordering" class="md-nav__link">
        Ordering
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Bundles (Guicey)
      </label>
    
    <a href="./" title="Bundles (Guicey)" class="md-nav__link md-nav__link--active">
      Bundles (Guicey)
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#predefined-bundles" title="Predefined bundles" class="md-nav__link">
    Predefined bundles
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-installers-bundle" title="Core installers bundle" class="md-nav__link">
    Core installers bundle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-installers-bundle" title="Web installers bundle" class="md-nav__link">
    Web installers bundle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hk-debug-bundle" title="HK debug bundle" class="md-nav__link">
    HK debug bundle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagnostic-bundle" title="Diagnostic bundle" class="md-nav__link">
    Diagnostic bundle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dropwizard-bundles-unification" title="Dropwizard bundles unification" class="md-nav__link">
    Dropwizard bundles unification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bundle-lookup" title="Bundle lookup" class="md-nav__link">
    Bundle lookup
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-property-lookup" title="System property lookup" class="md-nav__link">
    System property lookup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-loader-lookup" title="Service loader lookup" class="md-nav__link">
    Service loader lookup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-lookup-mechanism" title="Customizing lookup mechanism" class="md-nav__link">
    Customizing lookup mechanism
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../options/" title="Options" class="md-nav__link">
        Options
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../diagnostic/" title="Diagnostic" class="md-nav__link">
        Diagnostic
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../commands/" title="Commands" class="md-nav__link">
        Commands
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../web/" title="Web" class="md-nav__link">
        Web
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../test/" title="Test" class="md-nav__link">
        Test
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Installers
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-4">
        Installers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/resource/" title="Resource" class="md-nav__link">
        Resource
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/task/" title="Task" class="md-nav__link">
        Task
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/managed/" title="Managed" class="md-nav__link">
        Managed
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/lifecycle/" title="Lifecycle" class="md-nav__link">
        Lifecycle
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/healthcheck/" title="Health check" class="md-nav__link">
        Health check
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/jersey-ext/" title="Jersey extension" class="md-nav__link">
        Jersey extension
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/jersey-feature/" title="Jersey feature" class="md-nav__link">
        Jersey feature
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/eager/" title="Eager singleton" class="md-nav__link">
        Eager singleton
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/plugin/" title="Plugin" class="md-nav__link">
        Plugin
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/servlet/" title="Web servlet" class="md-nav__link">
        Web servlet
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/filter/" title="Web filter" class="md-nav__link">
        Web filter
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installers/listener/" title="Web listener" class="md-nav__link">
        Web listener
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5">
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../examples/authentication/" title="Authentication" class="md-nav__link">
        Authentication
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../examples/governator/" title="Governator" class="md-nav__link">
        Governator
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Extras
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-6">
        Extras
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../extras/admin-rest/" title="Admin REST" class="md-nav__link">
        Admin REST
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../extras/bom/" title="BOM" class="md-nav__link">
        BOM
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../extras/eventbus/" title="Guava EventBus" class="md-nav__link">
        Guava EventBus
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../extras/jdbi/" title="JDBI" class="md-nav__link">
        JDBI
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-7">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../about/license/" title="License" class="md-nav__link">
        License
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../about/history/" title="Release notes" class="md-nav__link">
        Release notes
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#predefined-bundles" title="Predefined bundles" class="md-nav__link">
    Predefined bundles
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-installers-bundle" title="Core installers bundle" class="md-nav__link">
    Core installers bundle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-installers-bundle" title="Web installers bundle" class="md-nav__link">
    Web installers bundle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hk-debug-bundle" title="HK debug bundle" class="md-nav__link">
    HK debug bundle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagnostic-bundle" title="Diagnostic bundle" class="md-nav__link">
    Diagnostic bundle
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dropwizard-bundles-unification" title="Dropwizard bundles unification" class="md-nav__link">
    Dropwizard bundles unification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bundle-lookup" title="Bundle lookup" class="md-nav__link">
    Bundle lookup
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-property-lookup" title="System property lookup" class="md-nav__link">
    System property lookup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-loader-lookup" title="Service loader lookup" class="md-nav__link">
    Service loader lookup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-lookup-mechanism" title="Customizing lookup mechanism" class="md-nav__link">
    Customizing lookup mechanism
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
                 <a href="https://github.com/xvik/dropwizard-guicey/edit/master/src/doc/docs/guide\bundles.md" title="Edit this page" class="md-icon md-content__edit">edit</a>
               
              
                
                <h1 id="guicey-bundles">Guicey bundles<a class="headerlink" href="#guicey-bundles" title="Permanent link">&para;</a></h1>
<p>By analogy with dropwizard bundles, guicey has it's own <code>GuiceyBundle</code>. These bundles contains almost the same options as 
main <code>GuiceBundle</code> builder. The main purpose is to group installers, extensions and guice modules related to specific 
feature.</p>
<p>Guicey bundles are initialized during dropwizard <code>run</code> phase. All guice modules registered in bundles will also be checked if 
<a href="../module-autowiring/">dropwizard objects autowiring</a> required.</p>
<p>For example, custom integration with some scheduler framework will require installers to register tasks and guice module
to configure framework. GuiceyBundle will allow reduce integration to just one bundle installation.</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">XLibIntegrationBundle</span> <span class="kd">implements</span> <span class="n">GuiceyBundle</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="kd">final</span> <span class="n">GuiceyBootstrap</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">bootstrap</span><span class="o">.</span><span class="na">installers</span><span class="o">(</span>
                <span class="n">XLibFeature1Installer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                <span class="n">XLibFeature2Installer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>                
        <span class="o">)</span>
        <span class="o">.</span><span class="na">modules</span><span class="o">(</span><span class="k">new</span> <span class="n">XLibGuiceModule</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">bootstrap</span><span class="o">.</span><span class="na">addBundle</span><span class="o">(</span><span class="n">GuiceBundle</span><span class="o">.&lt;</span><span class="n">TestConfiguration</span><span class="o">&gt;</span><span class="n">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">bundles</span><span class="o">(</span><span class="k">new</span> <span class="n">XLibIntegrationBundle</span><span class="o">())</span>
        <span class="o">.</span><span class="na">enableAutoConfig</span><span class="o">(</span><span class="s">&quot;package.to.scan&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">()</span>
<span class="o">);</span>
</pre></div>


<p>Bundles may be used to group application features: e.g. ResourcesBundle, TasksBundle (for example, when auto-scan not enabled to decompose configuration).</p>
<p>Bundles are transitive - bundle can install other bundles. 
Duplicate bundles are detected using bundle type, so infinite configuration loops or duplicate configurations are not possible.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Be careful if bundle is parameterizable (requires constructor arguments). If two such bundles will be registered, only
first registration will be actually used and other instance ignored. Note that application configurations (using main GuiceBundle methods) 
performed before bundles processing and so bundle instance with correct parameters could be registered there.</p>
</div>
<p>Transitive bundles (or simply a lot of bundles) may cause confusion. Use <a href="../diagnostic/">diagnostic info</a> to see how guicey was actually configured.  </p>
<h2 id="predefined-bundles">Predefined bundles<a class="headerlink" href="#predefined-bundles" title="Permanent link">&para;</a></h2>
<p>Guicey ships with few predefined bundles.</p>
<h3 id="core-installers-bundle">Core installers bundle<a class="headerlink" href="#core-installers-bundle" title="Permanent link">&para;</a></h3>
<p>Default installers are grouped into <code>CoreInstallersBundle</code>. This bundle is always installed implicitly (so you always have default installers).
It may be disabled using <code>.noDefaultInstallers()</code> method.</p>
<h3 id="web-installers-bundle">Web installers bundle<a class="headerlink" href="#web-installers-bundle" title="Permanent link">&para;</a></h3>
<p><code>WebInstallersBundle</code> provides installers for servlets, filters and listeners installation using servlet api annotations
(@WebServlet, @WebFilter, @WebListener). </p>
<p>Bundle is not installed by default to avoid confusion. May be enabled using <code>.useWebInstallers()</code>. </p>
<p>NOTE: If web installers used, then you may not need guice ServletModule support. To remove GuiceFilter registrations and ServletModule support use
<code>.noGuiceFilter()</code>.</p>
<h3 id="hk-debug-bundle">HK debug bundle<a class="headerlink" href="#hk-debug-bundle" title="Permanent link">&para;</a></h3>
<p><code>HK2DebugBundle</code> is special debug bundle to check that beans properly instantiated by guice or HK 
(and no beans are instantiated by both).</p>
<p>Only beans installed by installers implementing <code>JerseyInstaller</code> (<code>ResourceInstaller</code>, <code>JerseyProviderInstaller</code>).
All beans must be created by guice and only beans annotated with <code>@HK2Managed</code> must be instantiated by HK.</p>
<p>Bundle may be used in tests. For example using <code>guicey.bundles</code> property (see bundles lookup below).</p>
<p>May be enabled by <code>.strictScopeControl()</code> shortcut method.</p>
<h3 id="diagnostic-bundle">Diagnostic bundle<a class="headerlink" href="#diagnostic-bundle" title="Permanent link">&para;</a></h3>
<p>Bundle renders collected guicey <a href="../diagnostic/">diagnostic information</a>.</p>
<p>Output is highly configurable, use: <code>DiagnosticBundle.builder()</code> to configure reporting (if required).</p>
<p>Bundle may be registered with <a href="./#bundle-lookup">bundle lookup mechanism</a>. For example:</p>
<div class="codehilite"><pre><span></span><span class="n">PropertyBundleLookup</span><span class="o">.</span><span class="na">enableBundles</span><span class="o">(</span><span class="n">DiagnosticBundle</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</pre></div>


<p>May be enabled by <code>.printDiagnosticInfo()</code> shortcut method.</p>
<p>Special shortcut <code>.printAvailableInstallers()</code> register diagnostic bundle configured for <a href="../diagnostic/#installers-mode">showing only installers</a>. Useful when you looking for available features.</p>
<div class="admonition attention">
<p>Only one bundle instance accepted, both options can't be enabled at the same time.</p>
</div>
<h2 id="dropwizard-bundles-unification">Dropwizard bundles unification<a class="headerlink" href="#dropwizard-bundles-unification" title="Permanent link">&para;</a></h2>
<p>Guicey bundles and dropwizard bundles may be unified providing single (standard) extension point for both 
dropwizard and guicey features.</p>
<p>Feature is disabled by default, to enable it use <code>.configureFromDropwizardBundles()</code> method.</p>
<div class="codehilite"><pre><span></span><span class="n">bootstrap</span><span class="o">.</span><span class="na">addBundle</span><span class="o">(</span><span class="k">new</span> <span class="n">XLibBundle</span><span class="o">());</span>
<span class="n">bootstrap</span><span class="o">.</span><span class="na">addBundle</span><span class="o">(</span><span class="n">GuiceBundle</span><span class="o">.&lt;</span><span class="n">TestConfiguration</span><span class="o">&gt;</span><span class="n">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">configureFromDropwizardBundles</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">()</span>
<span class="o">);</span>
</pre></div>


<p>where</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">XLibBundle</span> <span class="kd">implements</span> <span class="n">Bundle</span><span class="o">,</span> <span class="n">GuiceyBundle</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">Bootstrap</span><span class="o">&lt;?&gt;</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{...}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">GuiceyBootstrap</span> <span class="n">bootstrap</span><span class="o">){...}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">Environment</span> <span class="n">environment</span><span class="o">)</span> <span class="o">{...}</span>
<span class="o">}</span>
</pre></div>


<p>When active, all registered bundles are checked if they implement <code>GuiceyBundle</code>.
Also, works with dropwizard <code>ConfiguredBundle</code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don't assume if guicey bundle's <code>initialize</code> method will be called before/after dropwizard bundle's <code>run</code> method. 
Both are possible (it depends if bundle registered before or after GuiceBundle).</p>
</div>
<h2 id="bundle-lookup">Bundle lookup<a class="headerlink" href="#bundle-lookup" title="Permanent link">&para;</a></h2>
<p>Bundle lookup mechanism used to lookup guicey bundles in various sources. It may be used to activate specific bundles
in tests (e.g. HK2DebugBundle) or to install 3<sup>rd</sup> party extensions from classpath.</p>
<p>Bundle lookup is equivalent to registering bundle directly using builder <code>bundles</code> method.</p>
<p>By default, 2 lookup mechanisms active. All found bundles are logged into console.
Duplicate bundles are removed (using bundle class to detect duplicate).</p>
<p>To disable default lookups use <code>disableBundleLookup</code>:</p>
<div class="codehilite"><pre><span></span><span class="n">bootstrap</span><span class="o">.</span><span class="na">addBundle</span><span class="o">(</span><span class="n">GuiceBundle</span><span class="o">.&lt;</span><span class="n">TestConfiguration</span><span class="o">&gt;</span><span class="n">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">disableBundleLookup</span><span class="o">()</span>
        <span class="o">.</span><span class="na">build</span><span class="o">()</span>
</pre></div>


<h3 id="system-property-lookup">System property lookup<a class="headerlink" href="#system-property-lookup" title="Permanent link">&para;</a></h3>
<p>System property <code>guicey.bundles</code> could contain comma separated list of guicey bundle classes. These bundles 
must have no-args constructor.</p>
<p>For example, activate HK debug bundle for tests:</p>
<div class="codehilite"><pre><span></span>java ... -Dguicey.bundles=ru.vyarus.dropwizard.guice.module.jersey.debug.HK2DebugBundle
</pre></div>


<p>Alternatively, system property may be set in code:</p>
<div class="codehilite"><pre><span></span><span class="n">PropertyBundleLookup</span><span class="o">.</span><span class="na">enableBundles</span><span class="o">(</span><span class="n">HK2DebugBundle</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>


<h3 id="service-loader-lookup">Service loader lookup<a class="headerlink" href="#service-loader-lookup" title="Permanent link">&para;</a></h3>
<p>Using default java <a href="https://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html">ServiceLoader</a> 
mechanism, loads all GuiceyBundle services.</p>
<p>This is useful for automatically install 3<sup>rd</sup> party extensions (additional installers, extensions, guice modules).</p>
<p>3<sup>rd</sup> party jar must contain services file:</p>
<div class="codehilite"><pre><span></span>META-INF/services/ru.vyarus.dropwizard.guice.module.installer.bundle.GuiceyBundle
</pre></div>


<p>File contain one or more (per line) GuiceyBundle implementations. E.g.</p>
<div class="codehilite"><pre><span></span>com.foo.Bundle1
com.foo.Bundle2
</pre></div>


<p>Then Bundle1, Bundle2 would be loaded automatically on startup.</p>
<h3 id="customizing-lookup-mechanism">Customizing lookup mechanism<a class="headerlink" href="#customizing-lookup-mechanism" title="Permanent link">&para;</a></h3>
<p>Custom bundle lookup must implement <code>GuiceyBundleLookup</code> interface:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomBundleLookup</span> <span class="kd">implements</span> <span class="n">GuiceyBundleLookup</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">GuiceyBundle</span><span class="o">&gt;</span> <span class="nf">lookup</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">GuiceyBundle</span><span class="o">&gt;</span> <span class="n">bundles</span> <span class="o">=</span> <span class="n">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">();</span>
        <span class="o">...</span>
        <span class="k">return</span> <span class="n">bundles</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Custom lookup implementation may be registered through:</p>
<div class="codehilite"><pre><span></span><span class="n">bootstrap</span><span class="o">.</span><span class="na">addBundle</span><span class="o">(</span><span class="n">GuiceBundle</span><span class="o">.&lt;</span><span class="n">TestConfiguration</span><span class="o">&gt;</span><span class="n">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">bundleLookup</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomBundleLookup</span><span class="o">())</span>
        <span class="o">.</span><span class="na">build</span><span class="o">()</span>
</pre></div>


<p>But it's better to register it through default implementation <code>DefaultBundleLookup</code>, which performs composition 
of multiple lookup implementations and logs resolved bundles to console.</p>
<div class="codehilite"><pre><span></span><span class="n">bootstrap</span><span class="o">.</span><span class="na">addBundle</span><span class="o">(</span><span class="n">GuiceBundle</span><span class="o">.&lt;</span><span class="n">TestConfiguration</span><span class="o">&gt;</span><span class="n">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">bundleLookup</span><span class="o">(</span><span class="k">new</span> <span class="n">DefaultBundleLookup</span><span class="o">().</span><span class="na">addLookup</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomBundleLookup</span><span class="o">()))</span>
        <span class="o">.</span><span class="na">build</span><span class="o">()</span>
</pre></div>


<p>To override list of default lookups:</p>
<div class="codehilite"><pre><span></span><span class="n">bootstrap</span><span class="o">.</span><span class="na">addBundle</span><span class="o">(</span><span class="n">GuiceBundle</span><span class="o">.&lt;</span><span class="n">TestConfiguration</span><span class="o">&gt;</span><span class="n">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">bundleLookup</span><span class="o">(</span><span class="k">new</span> <span class="n">DefaultBundleLookup</span><span class="o">(</span><span class="k">new</span> <span class="n">ServiceLoaderBundleLookup</span><span class="o">(),</span> <span class="k">new</span> <span class="n">CustomBundleLookup</span><span class="o">()))</span>
        <span class="o">.</span><span class="na">build</span><span class="o">()</span>
</pre></div>


<p>Here two lookup mechanisms registered (property lookup is not registered and will not be implicitly added).</p>
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../ordering/" title="Ordering" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Ordering
              </span>
            </div>
          </a>
        
        
          <a href="../options/" title="Options" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Options
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2014-2017 Vyacheslav Rusakov
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/xvik" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/vyarus" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-2afe21e0b2.js"></script>
      <script>var config={url:{base:"../.."}},app=new Application(config);app.initialize()</script>
      
    
    
      
    
  </body>
</html>