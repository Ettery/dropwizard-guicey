



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Dropwizard guice integration">
      
      
        <link rel="canonical" href="https://xvik.github.io/dropwizard-guicey/5.0.0-rc.1/release-notes/">
      
      
        <meta name="author" content="Vyacheslav Rusakov">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>Release Notes - Dropwizard-guicey</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../#release-notes" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://xvik.github.io/dropwizard-guicey/5.0.0-rc.1" title="Dropwizard-guicey" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Dropwizard-guicey
              </span>
              <span class="md-header-nav__topic">
                Release Notes
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/xvik/dropwizard-guicey/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      dropwizard-guicey
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://xvik.github.io/dropwizard-guicey/5.0.0-rc.1" title="Dropwizard-guicey" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Dropwizard-guicey
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/xvik/dropwizard-guicey/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      dropwizard-guicey
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../concepts/" title="Concepts overview" class="md-nav__link">
      Concepts overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      User guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        User guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/lifecycle/" title="Integration lifecycle" class="md-nav__link">
      Integration lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/injector/" title="Injector" class="md-nav__link">
      Injector
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/module-autowiring/" title="Module autowiring" class="md-nav__link">
      Module autowiring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/bindings/" title="Bindings" class="md-nav__link">
      Bindings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/scan/" title="Classpath scan" class="md-nav__link">
      Classpath scan
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/installers/" title="Installers" class="md-nav__link">
      Installers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/ordering/" title="Ordering" class="md-nav__link">
      Ordering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/bundles/" title="Bundles (Guicey)" class="md-nav__link">
      Bundles (Guicey)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/options/" title="Options" class="md-nav__link">
      Options
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/diagnostic/" title="Diagnostic" class="md-nav__link">
      Diagnostic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/events/" title="Lifecycle events" class="md-nav__link">
      Lifecycle events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/commands/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/web/" title="Web" class="md-nav__link">
      Web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/test/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guide/dg-migration/" title="Migration from dropwizard-guice" class="md-nav__link">
      Migration from dropwizard-guice
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Installers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Installers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/resource/" title="Resource" class="md-nav__link">
      Resource
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/task/" title="Task" class="md-nav__link">
      Task
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/managed/" title="Managed" class="md-nav__link">
      Managed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/lifecycle/" title="Lifecycle" class="md-nav__link">
      Lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/healthcheck/" title="Health check" class="md-nav__link">
      Health check
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/jersey-ext/" title="Jersey extension" class="md-nav__link">
      Jersey extension
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/jersey-feature/" title="Jersey feature" class="md-nav__link">
      Jersey feature
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/eager/" title="Eager singleton" class="md-nav__link">
      Eager singleton
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/plugin/" title="Plugin" class="md-nav__link">
      Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/servlet/" title="Web servlet" class="md-nav__link">
      Web servlet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/filter/" title="Web filter" class="md-nav__link">
      Web filter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/listener/" title="Web listener" class="md-nav__link">
      Web listener
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/authentication/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/governator/" title="Governator" class="md-nav__link">
      Governator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/hibernate/" title="Hibernate" class="md-nav__link">
      Hibernate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/eventbus/" title="EventBus" class="md-nav__link">
      EventBus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/jdbi/" title="JDBI" class="md-nav__link">
      JDBI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/jdbi3/" title="JDBI3" class="md-nav__link">
      JDBI3
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Extras
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Extras
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../extras/admin-rest/" title="Admin REST" class="md-nav__link">
      Admin REST
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extras/bom/" title="BOM" class="md-nav__link">
      BOM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extras/lifecycle-annotations/" title="Lifecycle annotations" class="md-nav__link">
      Lifecycle annotations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extras/eventbus/" title="Guava EventBus" class="md-nav__link">
      Guava EventBus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extras/jdbi/" title="JDBI" class="md-nav__link">
      JDBI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extras/jdbi3/" title="JDBI3" class="md-nav__link">
      JDBI3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extras/spa/" title="SPA" class="md-nav__link">
      SPA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extras/gsp/" title="Server Pages" class="md-nav__link">
      Server Pages
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../about/compatibility/" title="Compatibility" class="md-nav__link">
      Compatibility
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/history/" title="Release notes" class="md-nav__link">
      Release notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../about/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#summary" title="Summary" class="md-nav__link">
    Summary
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-changes" title="General changes" class="md-nav__link">
    General changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new-guicey-lifecycle" title="New guicey lifecycle" class="md-nav__link">
    New guicey lifecycle
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-bundles-and-modules-of-the-same-type-support" title="Multiple bundles and modules of the same type support" class="md-nav__link">
    Multiple bundles and modules of the same type support
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deduplication" title="Deduplication" class="md-nav__link">
    Deduplication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting" title="Reporting" class="md-nav__link">
    Reporting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-model" title="Configuration Model" class="md-nav__link">
    Configuration Model
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dropwizard-bundles-direct-support" title="Dropwizard bundles direct support" class="md-nav__link">
    Dropwizard bundles direct support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-from-guice-bindings-jersey1-guice-style" title="Configuration from guice bindings (jersey1-guice style)" class="md-nav__link">
    Configuration from guice bindings (jersey1-guice style)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#guice-reports" title="Guice reports" class="md-nav__link">
    Guice reports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bindinginstaller" title="BindingInstaller" class="md-nav__link">
    BindingInstaller
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guicey-listeners-changes" title="Guicey listeners changes" class="md-nav__link">
    Guicey listeners changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reporting-changes" title="Reporting changes" class="md-nav__link">
    Reporting changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guicey-hooks-changes" title="Guicey hooks changes" class="md-nav__link">
    Guicey hooks changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#multiple-classloaders-support" title="Multiple classloaders support" class="md-nav__link">
    Multiple classloaders support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guicey-bom-includes-guicey-itself" title="Guicey BOM includes guicey itself" class="md-nav__link">
    Guicey BOM includes guicey itself
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java-11-compatibility" title="Java 11 compatibility" class="md-nav__link">
    Java 11 compatibility
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixes-issues" title="Fixes issues" class="md-nav__link">
    Fixes issues
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-guide" title="Migration guide" class="md-nav__link">
    Migration guide
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dropwizard-related" title="Dropwizard related" class="md-nav__link">
    Dropwizard related
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guiceybundle" title="GuiceyBundle" class="md-nav__link">
    GuiceyBundle
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-instances-registration-bundles-modules" title="Multiple instances registration (bundles, modules)" class="md-nav__link">
    Multiple instances registration (bundles, modules)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guicey-bindings-analysis" title="Guicey bindings analysis" class="md-nav__link">
    Guicey bindings analysis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-hooks" title="Test hooks" class="md-nav__link">
    Test hooks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removed-options" title="Removed options" class="md-nav__link">
    Removed options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reporting_1" title="Reporting" class="md-nav__link">
    Reporting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/xvik/dropwizard-guicey/edit/master/src/doc/docs/release-notes.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="release-notes">Release Notes<a class="headerlink" href="#release-notes" title="Permanent link">&para;</a></h1>
<p>Release contains many breaking changes due to:</p>
<ul>
<li>Dropwizard 2.0 (Jersey 2.26) breaking changes</li>
<li>Change of guicey lifecycle</li>
</ul>
<p>As dropwizard 2.0 already introduce many breaking changes (new jersey actually), so it was an ideal moment to fix 
all conceptual guicey mistakes. </p>
<p>Please read <a href="https://github.com/dropwizard/dropwizard/blob/master/docs/source/manual/upgrade-notes/upgrade-notes-2_0_x.rst">dropwizard 2.0 upgrade guide</a> first.</p>
<p>See <a href="#migration-guide">Migration Guide</a> for migration-only instructions.</p>
<h2 id="summary">Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#general-changes">General changes</a></li>
<li><a href="#new-guicey-lifecycle">New guicey lifecycle</a></li>
<li><a href="#multiple-bundles-and-modules-of-the-same-type-support">Multiple bundles and modules of the same type support</a></li>
<li><a href="#dropwizard-bundles-direct-support">Dropwizard bundles direct support</a></li>
<li><a href="#configuration-from-guice-bindings-jersey1-guice-style">Configuration from guice bindings (jersey1-guice style)</a></li>
<li><a href="#multiple-classloaders-support">Multiple classloaders support</a></li>
<li><a href="#guicey-listeners-changes">Guicey listeners changes</a></li>
<li><a href="#reporting-changes">Reporting changes</a></li>
<li><a href="#guicey-hooks-changes">Guicey hooks changes</a></li>
<li><a href="#guicey-bom-includes-guicey-itself">Guicey BOM includes guicey itself</a></li>
<li><a href="#java-11-compatibility">Java 11 compatibility</a></li>
</ul>
<h2 id="general-changes">General changes<a class="headerlink" href="#general-changes" title="Permanent link">&para;</a></h2>
<p>Jersey 2.26 introduces an abstraction for injection layer in order to get rid of hk2 direct usage.
This allows complete hk2 avoidance in the future. Right now it means that all direct hk2 classes must be replaced
by jersey abstractions (see <a href="#dropwizard-related">migration matrix</a> below)</p>
<p>Note that <code>org.glassfish.hk2.api.ServiceLocator</code> must be replaced with <code>org.glassfish.jersey.internal.inject.InjectionManager</code>.
The later may be used to obtain locator, but be aware that HK2 supposed to be completely dropped in the next guicey version.</p>
<p><code>@HK2Managed</code> guicey annotation was renamed to <code>@JerseyManaged</code> to point on possible absence of HK2.</p>
<p><code>GuiceBundle.builder()#useWebInstallers()</code> was removed because <code>WebInstallersBundle</code> is 
activated by default and so you don't need to activate it manually anymore. </p>
<h2 id="new-guicey-lifecycle">New guicey lifecycle<a class="headerlink" href="#new-guicey-lifecycle" title="Permanent link">&para;</a></h2>
<p>Before guicey perform all it's operations under dropwizard run phase. This makes guicey and dropwizard
bundles interoperability hard. But guicey should not limit dropwizard abilities and so now
almost all configuration is performed under dropwizard's configuration phase.</p>
<p>New guicey lifecycle:</p>
<ul>
<li>Dropwizard bundles are resolved and initialized under configuration phase</li>
<li>Classpath scan and extensions resolution appears under configuration phase</li>
<li>Guice injector, as before, created under run phase.</li>
</ul>
<p><code>GuiceyBundle</code> interface changed from </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GuiceyBundle</span> <span class="o">{</span>
    <span class="c1">// called on run phase</span>
    <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">GuiceyBootstrap</span> <span class="n">bootstrap</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<p>into </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GuiceyBundle</span> <span class="o">{</span>
    <span class="c1">// called on configuration phase</span>
    <span class="k">default</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">GuiceyBootstrap</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{}</span>
    <span class="c1">// called on run phase</span>
    <span class="k">default</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">GuiceyEnvironment</span> <span class="n">environment</span><span class="o">)</span> <span class="o">{}</span>
<span class="o">}</span>
</pre></div>

<p>Default methods were used by analogy with updated dropwizard <code>ConfiguredBundle</code> to avoid need to always
implement both methods.                      </p>
<p>All registrations, except modules must be performed under configuration phase. On run phase only guice modules could be
registered because guice modules often require configuration values (without this it would always
require to use root <code>DropwizardAwareModule</code> to perform some modules registrations).</p>
<p>Extensions might be disabled in run phase: assumed that this could be required for
optional features, driven by configuration (not needed extensions could be disabled, based on 
configuration object values).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dropwizard and guicey bundles are completely equivalent now, but guicey bundles provide more 
configuration options (aware of guicey). So prefer using <code>GuiceyBundle</code> instead of dropwizard bundles. 
Note that guicey bundles now provide shortcut methods for easy dropwizard bundles registration.</p>
</div>
<p>Before, extensions registration was performed under guice injector creation, but now it was moved 
just after injector creation in order to differentiate pure injector creation errors from
extension installation errors.  </p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Statistics report (<code>.printDiagnosticReports()</code>) will also print time by phase:
<div class="codehilite"><pre><span></span>GUICEY started in 441.1 ms (104.8 ms config / 336.2 ms run / 0 jersey)
</pre></div>
(configuration phase / run phase / extensions installation during jersey startup)</p>
</div>
<h2 id="multiple-bundles-and-modules-of-the-same-type-support">Multiple bundles and modules of the same type support<a class="headerlink" href="#multiple-bundles-and-modules-of-the-same-type-support" title="Permanent link">&para;</a></h2>
<p>Before, guicey was always tracking configuration items by class and so when you register multiple bundles or modules
or the same type, only one was accepted: </p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">modules</span><span class="o">(</span><span class="k">new</span> <span class="n">MyModule1</span><span class="o">(),</span> <span class="k">new</span> <span class="n">MyModule2</span><span class="o">())</span>
</pre></div>

<p>But often it is required to register multiple modules/bundles with different parametrization:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">modules</span><span class="o">(</span><span class="k">new</span> <span class="n">ParametrizableModule</span><span class="o">(</span><span class="s">&quot;mod1&quot;</span><span class="o">),</span> <span class="k">new</span> <span class="n">ParametrizableModule</span><span class="o">(</span><span class="s">&quot;mod2&quot;</span><span class="o">))</span>
</pre></div>

<p>Now guicey <strong>allows multiple instances</strong> of the same type. So, in examples above, both modules
would be registered and used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Multiple instances support is more logical in context of dropwizard, because dropwizard itself 
allows registration of multiple bundles of the same type.</p>
</div>
<h3 id="deduplication">Deduplication<a class="headerlink" href="#deduplication" title="Permanent link">&para;</a></h3>
<p>In some cases, previous limitation was actually desired for deduplication: before, when two or more bundles use some
common bundle, they could safely register it and be sure that only one common bundle instance would be used.
Now, <strong>both</strong> common bundles would be registered.</p>
<p>To workaround such cases <em>deduplication mechanism</em> was introduced: instances of the same
type are considered duplicate if they are equal. So, in order to resolve "common bundle problem"
bundle must only properly implement equals method, like this:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CommonBundle</span> <span class="kd">implements</span> <span class="n">GuiceyBundle</span> <span class="o">{</span>
    <span class="o">...</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="kd">final</span> <span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">getClass</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">obj</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Guicey provide base classes for such cases:
<code>UniqueGuiceyBundle</code> for unique bundles and <code>UniqueModule</code> for unique guice modules</p>
</div>
<p>But, it may be impossible to implement correct equals method for some 3<sup>rd</sup> party bundle or module used.
In this case manual deduplication implementation may be registered:</p>
<div class="codehilite"><pre><span></span><span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">...</span>
    <span class="o">.</span><span class="na">duplicateConfigDetector</span><span class="o">((</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">registered</span><span class="o">,</span> <span class="n">Object</span> <span class="n">newItem</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
         <span class="k">if</span> <span class="o">(</span><span class="n">newItem</span> <span class="n">isntanceof</span> <span class="n">Some3rdPartyBundle</span><span class="o">)</span> <span class="o">{</span>
             <span class="c1">// decide if item collide with provided registered instances (of the same type)</span>
             <span class="k">return</span> <span class="n">detectedDuplicate</span> <span class="c1">// instance that registered is duplicate to or null to accept item</span>
         <span class="o">}</span>           
         <span class="c1">// allow instance registration</span>
         <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>    
    <span class="o">})</span>
</pre></div>

<p>Detector is called after equals check, so you may be sure that newItem is not equal to 
any of already registered instances (detector extends default deduplication mechanism, not replaces).      </p>
<p>Old <em>"1 instance per class"</em> behaviour could be recovered with bundled detector:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">duplicateConfigDetector</span><span class="o">(</span><span class="k">new</span> <span class="n">LegacyModeDuplicatesDetector</span><span class="o">())</span>
</pre></div>

<h3 id="reporting">Reporting<a class="headerlink" href="#reporting" title="Permanent link">&para;</a></h3>
<p>Configuration diagnostic report (<code>.printDiagnosticReport()</code>) was improved to show all registered instances and<br />
ignored duplicates.</p>
<p>For example, if we have module declared to be unique by constructor value:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VMod</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">value</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">VMod</span><span class="o">(</span><span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="k">instanceof</span> <span class="n">VMod</span> <span class="o">&amp;&amp;</span> <span class="n">value</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">obj</span><span class="o">.</span><span class="na">value</span><span class="o">);</span>
    <span class="o">}</span>

<span class="o">}</span>   
</pre></div>

<p>If modules are registered like this:</p>
<div class="codehilite"><pre><span></span> <span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">modules</span><span class="o">(</span><span class="k">new</span> <span class="n">VMod</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="n">VMod</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="k">new</span> <span class="n">VMod</span><span class="o">(</span><span class="mi">2</span><span class="o">),</span> <span class="k">new</span> <span class="n">VMod</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span>
    <span class="o">.</span><span class="na">printDiagnosticReport</span><span class="o">()</span>
    <span class="o">.</span><span class="na">build</span><span class="o">()</span>
</pre></div>

<p>Report would contain:</p>
<div class="codehilite"><pre><span></span>GUICE MODULES =
        VMod                          (com.mycompany) *REG(2/4) 

APPLICATION
    ├── module     VMod                          (com.mycompany)
    ├── module     -VMod                         (com.mycompany) *DUPLICATE
    ├── module     VMod#2                        (com.mycompany)
    ├── module     -VMod#2                       (com.mycompany) *DUPLICATE
</pre></div>

<p>Where you can see that 2 of 4 registered modules of type VMod were registered.
Note that instances are numbered (#2) in order of registration (without duplicates) 
so you can always see what bundle were considered as original (and registration order when
bundles of the same type are registered in different bundles). </p>
<h3 id="configuration-model">Configuration Model<a class="headerlink" href="#configuration-model" title="Permanent link">&para;</a></h3>
<p>As before, guicey configuration info (used for it's reports) is available through
<code>@Inject GuiceyConfigurationInfo info</code> bean. But in new version it is not class centric:
instead new <code>ItemId</code> class used.</p>
<p>ItemId compose item type with real object hash in order to differentiate different instances of type.</p>
<div class="codehilite"><pre><span></span><span class="c1">// equal classes</span>
<span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">MyType</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">MyType</span><span class="o">.</span><span class="na">class</span><span class="o">))</span>
<span class="c1">// but not equal instances </span>
<span class="o">!</span><span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">instance1</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">instance2</span><span class="o">))</span>  
</pre></div>

<p>But, to simplify checks, instance id is always equal to type id:</p>
<div class="codehilite"><pre><span></span><span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">myTypeInstance</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="n">ItemId</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">MyType</span><span class="o">.</span><span class="na">class</span><span class="o">))</span>  
</pre></div>

<p>ItemId's now also used for scopes differentiation (because multiple bundles of the same type could be registered
and class is not enough anymore to differentiate scopes). </p>
<p>Some api methods still return lists of classes (for cases when duplicates are not important).</p>
<h2 id="dropwizard-bundles-direct-support">Dropwizard bundles direct support<a class="headerlink" href="#dropwizard-bundles-direct-support" title="Permanent link">&para;</a></h2>
<p>Dropwizard bundles now could be registered directly with main guice bundle:</p>
<div class="codehilite"><pre><span></span> <span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">dropwizardBundles</span><span class="o">(</span><span class="k">new</span> <span class="n">MyDropwizardBundle</span><span class="o">())</span>
</pre></div>

<p>And from guicey bundle:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">GuiceyBootstrap</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">bootstrap</span><span class="o">.</span><span class="na">dropwizardBundles</span><span class="o">(</span><span class="k">new</span> <span class="n">MyDropwizardBundle</span><span class="o">())</span>
<span class="o">}</span>
</pre></div>

<p>Benefits of registration through guicey api:</p>
<ul>
<li>Bundle could be disabled (with <code>.disableDropwizardBundles(MyDropwizardBundle.class)</code>)</li>
<li>Bundle appear in diagnostic reports</li>
<li>Deduplication mechanism applied to registered bundles</li>
</ul>
<p>And that's not all: guicey will also track transitive dropwizard bundles
(bundles, installed by registered bundles). That means you can see (in report) 
and control entire application configuration.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only bundles registered with guicey api are tracked. If you don't want some bundle to be tracked
register it in dropwizard boostrap object directly (even within guicey bundle bootstrap is available)</p>
</div>
<p>This could be useful for deduplication. For example, you have some common
dropwizard bundle and two other bundles, registering this common bindle. Normally,
you can't use both bundles, because dropwizard will try to install both common bundles.
But guicey will deduplicate them. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Transitive dropwizard bundles are tracked by proxying bootsrap object, passed into bundles (not global!).
This introduce ~200ms startup overhead (clearly visible on stats report).</p>
</div>
<p>Transitive drtopwizard bundles detection could be disabled with option:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="n">GuieyOptions</span><span class="o">.</span><span class="na">TrackDropwizardBundles</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>
</pre></div>

<p>In this case only root bundles registered through guicey api would be visible for guicey
and so deduplication and disabling will affect only them.    </p>
<h2 id="configuration-from-guice-bindings-jersey1-guice-style">Configuration from guice bindings (jersey1-guice style)<a class="headerlink" href="#configuration-from-guice-bindings-jersey1-guice-style" title="Permanent link">&para;</a></h2>
<p>Guicey now can recognize extensions from guice bindings in configured guice modules. For example,</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyModule</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span> <span class="o">()</span> <span class="o">{</span>
        <span class="c1">// right parts just for example </span>
        <span class="n">bind</span><span class="o">(</span><span class="n">MyResource</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="n">MyResourceImpl</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">bind</span><span class="o">(</span><span class="n">MyManaged</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">toProvider</span><span class="o">(</span><span class="n">MyManagedProvider</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>Guicey will detect <code>MyResource</code> as jersey resource and <code>MyManaged</code> as managed extension.</p>
<p>This is completely equivalent to</p>
<div class="codehilite"><pre><span></span><span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">extensions</span><span class="o">(</span><span class="n">MyResource</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">MyManaged</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Internally, the same installers are used for extensions recognition and installation.
The only difference is that guicey would not create default bindings for such extensions
(because bindings already exists).</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Limitations</p>
<p>Only bindings in user modules are checked: overriding modules are not checked as they supposed
to be used for quick fixes and test mocking.
Generified (<code>bind(new TypeLiteral&lt;MyResource&lt;String&gt;(){})</code>) and 
qualified (<code>bind(MyResource.class).annotatedWith(Qualify.class)</code>) bindings are ignored
(simply because it's not obvious what to do with them).</p>
</div>
<p>Extensions from guice bindins could be also disabled:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">disableExtensions</span><span class="o">(</span><span class="n">MyResource</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>

<p>This is possible because guicey use guice SPI to parse configured bindings (before injector creation)
and could exclude some bindings before injector startup.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To avoid duplicate work by injector (to parse user modules again), guicey prepares synthetic
module with pre-processed bindings (and pass it to injector instead of raw modules).</p>
</div>
<p>Also, guicey is able to track transitive modules (modules installed by registered modules)
and exclude disabled modules.      </p>
<p>For example, </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyModule</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">install</span><span class="o">(</span><span class="k">new</span> <span class="n">OtherMyModule</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>  

<span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">modules</span><span class="o">(</span><span class="k">new</span> <span class="n">MyModule</span><span class="o">())</span>
    <span class="o">.</span><span class="na">disableModules</span><span class="o">(</span><span class="n">OtherMyModule</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>

<p>Will correctly exclude transitive module (including all later transitive modules).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Deduplication rules will not work with transitive modules: guicey can only detect
complete guice modules tree, but not intercept module instance registration.
Anyway, be aware that <em>guice itself</em> support deduplication: only one of equal modules
will be actually installed.   </p>
</div>
<p>Guice modules analysis could be disabled with option:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="n">GuiceyOptions</span><span class="o">.</span><span class="na">AnalyzeModules</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>
</pre></div>

<p>In this case, guicey will work exactly as before: it would only see root modules, configured
by user and extensions will not be detected from bindings. </p>
<h3 id="guice-reports">Guice reports<a class="headerlink" href="#guice-reports" title="Permanent link">&para;</a></h3>
<p>Guice bindings will be shown on diagnostic report <code>.printDiagnosticReport()</code></p>
<div class="codehilite"><pre><span></span>├── GUICE BINDINGS
    │   │
    │   └── BindModule                   (com.mycompany)
    │       └── extension  Ext                          (com.mycompany.ext)
</pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Guice bindings are shown as sub tree because only target extension module class is known
whereas multiple modules with the same type could be registered.
Extensions are show relative to the top guice module registered by user
(because this report just shows "configuration sources")        </p>
</div>
<p>New guice bindings report <code>.printGuiceBindings()</code>:</p>
<div class="codehilite"><pre><span></span> 1 MODULES with 3 bindings
    │
    └── CasesModule                  (r.v.d.g.d.r.g.support)
        ├── &lt;typelistener&gt;                        CustomTypeListener                              at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:19)
        ├── &lt;provisionlistener&gt;                   CustomProvisionListener                         at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:26)
        ├── &lt;aop&gt;                                 CustomAop                                       at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:33)
        ├── untargetted          [@Singleton]     AopedService                                    at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:36) *AOP
        ├── linkedkey            [@Prototype]     BindService                                     at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:37) *OVERRIDDEN
        └── instance             [@Singleton]     BindService2                                    at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.CasesModule.configure(CasesModule.java:38) *OVERRIDDEN


    1 OVERRIDING MODULES with 2 bindings
    │
    └── OverrideModule               (r.v.d.g.d.r.g.support)
        ├── linkedkey            [@Prototype]     BindService                                     at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.OverrideModule.configure(OverrideModule.java:16) *OVERRIDE
        └── instance             [@Singleton]     BindService2                                    at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.OverrideModule.configure(OverrideModule.java:17) *OVERRIDE


    1 UNDECLARED bindings
    └── JitService                   (r.v.d.g.d.r.g.s.exts)


    BINDING CHAINS
    └── BindService  --[linked]--&gt;  OverrideService
</pre></div>

<p>Shows all bindings in user modules (wihthout overriding modules)</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code>.printAllGuiceBindings()</code> shows also guicey's own bindings and guice internal bindings.
It may be useful to see everything guicey configures. </p>
</div>
<p>And new guice aop map report <code>.printGuiceAopMap()</code>:</p>
<div class="codehilite"><pre><span></span>    2 AOP handlers declared
    ├── AopModule/Interceptor1                                                    at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.AopModule.configure(AopModule.java:23)
    └── AopModule/Interceptor2                                                    at ru.vyarus.dropwizard.guice.debug.renderer.guice.support.AopModule.configure(AopModule.java:24)


    1 bindings affected by AOP
    │
    └── Service    (r.v.d.g.d.r.g.s.AopModule)
        ├── something()                                                       Interceptor1
        └── somethingElse(List)                                               Interceptor1
</pre></div>

<p>Shows all declared guice aop handlers and how they apply to beans (including order).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This report is intended to be used as a tool to look some exact beans and methods with
<code>.printGuiceAopMap(new GuiceAopConfig().types(...).methods(...))</code></p>
</div>
<h3 id="bindinginstaller">BindingInstaller<a class="headerlink" href="#bindinginstaller" title="Permanent link">&para;</a></h3>
<p>Interface of <code>BindingInstaller</code> were changed from </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BindingInstaller</span> <span class="o">{</span>    
    <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">bind</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">T</span><span class="o">&gt;</span> <span class="n">type</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<p>into </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">BindingInstaller</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">bindExtension</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">type</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">lazy</span><span class="o">);</span>
    <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">checkBinding</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">type</span><span class="o">,</span> <span class="n">Binding</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">manualBinding</span><span class="o">);</span>
    <span class="kt">void</span> <span class="nf">installBinding</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">type</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<p>Where </p>
<p><div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">bindExtension</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">type</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">lazy</span><span class="o">);</span>
</pre></div>
will be called for classpath scan and directly registered extensions, </p>
<div class="codehilite"><pre><span></span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="nf">checkBinding</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">type</span><span class="o">,</span> <span class="n">Binding</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">manualBinding</span><span class="o">);</span>
</pre></div>

<p>for detected guice bindings and </p>
<div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">installBinding</span><span class="o">(</span><span class="n">Binder</span> <span class="n">binder</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;?&gt;</span> <span class="n">type</span><span class="o">);</span>
</pre></div>

<p>in both cases to apply some common logic (like reporting)</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Binding installers may now be called multiple times in case if guice reports will be activated.
If required, actual run could be differentiated from report by current stage <code>currentStage() == Stage.TOOL</code>.</p>
</div>
<h2 id="guicey-listeners-changes">Guicey listeners changes<a class="headerlink" href="#guicey-listeners-changes" title="Permanent link">&para;</a></h2>
<p>Deduplication applied for registered listeners (through <code>.listen()</code>). It is not the same
mechanism as applied for extensions. Listeners are registered now in <code>LinkedHashSet</code> and so
listeners properly implementing equals and hashcode would be automatically ignored.</p>
<p>Listeners deduplication is useful for reporting: as now all guicey reports implemented 
with listeners and they correctly implement equals and hashcode so if user by accident
register multiple reports they would be printed just once.</p>
<p>Supported events were changed (due to lifecycle changes). More information 
(configuration objects) added to events. </p>
<p>One special event added <code>ApplicationStarted</code> which is always called after dropwizard startup 
(including jersey start). It would be fired even in tests when <code>GuiceyAppRule</code> used 
(which does not start jersey). Supposed to be used to simplify diagnostic reporting.</p>
<h2 id="reporting-changes">Reporting changes<a class="headerlink" href="#reporting-changes" title="Permanent link">&para;</a></h2>
<p>All guice reports were moved into top-level package "debug". All reports are
guicey listeners now. </p>
<p>Listeners deduplication mechanism used to ignore duplicate reports activation:
e.g. duplicate <code>.printDiagnosticReport()</code> call will not cause duplicate report render.</p>
<p>Diagnostic report (<code>.printDiagnosticReport()</code>) is now logged as single log message
and not each sub report as separate log.</p>
<p>Statistics sub report now includes guice startup logs (previously required to be activated separately):</p>
<div class="codehilite"><pre><span></span>    ├── [54%] INJECTOR created in 236.6 ms
    │   ├── Module execution: 143 ms
    │   ├── Interceptors creation: 1 ms
    │   ├── TypeListeners &amp; ProvisionListener creation: 2 ms
    │   ├── Scopes creation: 1 ms
    │   ├── Binding creation: 22 ms
    │   ├── Private environment creation: 1 ms
    │   ├── Binding initialization: 35 ms
    │   ├── Binding indexing: 1 ms
    │   ├── Collecting injection requests: 2 ms
    │   ├── Static validation: 4 ms
    │   ├── Instance member validation: 3 ms
    │   ├── Provider verification: 1 ms
    │   ├── Static member injection: 10 ms
    │   ├── Instance injection: 2 ms
    │   └── Preloading singletons: 6 ms
</pre></div>

<p>If you were using <code>DiagnosticBundle</code> directly it is now <code>ConfigurationDiagnostic</code> listener.
<code>DebugGuiceyLifecycle</code> was renamed to <code>LifecycleDiagnostic</code></p>
<h2 id="guicey-hooks-changes">Guicey hooks changes<a class="headerlink" href="#guicey-hooks-changes" title="Permanent link">&para;</a></h2>
<p>Guicey lifecycle hooks initially were supposed to be used for testing only. Now they
supposed to be also used for pluggable diagnostic tools (bundled, but not active). 
It could be additional tracing, instrumentation etc. </p>
<p>Hooks supposed to be activated through system property:</p>
<div class="codehilite"><pre><span></span>-Dguicey.hooks=com.mycompany.MyHook1,com.mycompany.MyHook2
</pre></div>

<p>Hook aliases were introduced to simplify activation:</p>
<div class="codehilite"><pre><span></span><span class="n">GuiceBindle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">hookAlias</span><span class="o">(</span><span class="s">&quot;alias1&quot;</span><span class="o">,</span> <span class="n">MyHook1</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>    
</pre></div>

<p>After alias registration, hook(s) could be enabled with alias name instead of full class name:</p>
<div class="codehilite"><pre><span></span>-Dguicey.hooks=alias1
</pre></div>

<p>Also, to make available tools more obvious, all registered aliases are logged at startup:</p>
<div class="codehilite"><pre><span></span>INFO  [2019-09-16 16:26:35,229] ru.vyarus.dropwizard.guice.hook.ConfigurationHooksSupport: Available hook aliases [ -Dguicey.hooks=alias ]: 

    alias1                    com.mycompany.MyHook1
</pre></div>

<p>By default, guicey provide <code>DiagnosticHook</code> which activates guicey's diagnostic reports:</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DiagnosticHook</span> <span class="kd">implements</span> <span class="n">GuiceyConfigurationHook</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="kd">final</span> <span class="n">GuiceBundle</span><span class="o">.</span><span class="na">Builder</span> <span class="n">builder</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">builder</span><span class="o">.</span><span class="na">printDiagnosticInfo</span><span class="o">()</span>
                <span class="o">.</span><span class="na">printLifecyclePhasesDetailed</span><span class="o">()</span>
                <span class="o">.</span><span class="na">printCustomConfigurationBindings</span><span class="o">()</span>
                <span class="o">.</span><span class="na">printGuiceBindings</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>It is registered with <code>diagnostic</code> alias and so diagnostic reports may be easily enabled even
for compiled application with:</p>
<div class="codehilite"><pre><span></span>-Dguicey.hooks=diagnostic
</pre></div>

<h2 id="multiple-classloaders-support">Multiple classloaders support<a class="headerlink" href="#multiple-classloaders-support" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p>This is very special case, not appearing in usual dropwizard usage.</p>
</div>
<p>Before, guicey configuration was based on classes, but if same class come from
different classloaders, it would be detected as different extensions.</p>
<p>Now guicey would use class name for extension duplicates detection. </p>
<p>The same for instances (modules, bundles): custom duplicates detector implementation (<code>.duplicateConfigDetector()</code>) will receive 
objects for test, even if object classes were loaded by different classloaders.</p>
<p><code>UniqueGuiceyBundle</code> and <code>UniqueModule</code> classes equals and hashcode implementation
also check class names to correctly detect different classloaders case. </p>
<div class="admonition note">
<p>Bundled reporting listeners still work on class level. Anyway custom listener
could always implement equals and hashcode correctly honoring different classloaders case.     </p>
</div>
<h2 id="guicey-bom-includes-guicey-itself">Guicey BOM includes guicey itself<a class="headerlink" href="#guicey-bom-includes-guicey-itself" title="Permanent link">&para;</a></h2>
<p>Before, when guicey pom was used as bom, it was always required to put guicey version:</p>
<div class="codehilite"><pre><span></span><span class="n">dependencyManagement</span> <span class="o">{</span>
    <span class="n">imports</span><span class="o">.</span><span class="na">mavenBom</span> <span class="s1">&#39;ru.vyarus:dropwizard-guicey:4.2.2&#39;</span> 
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s1">&#39;ru.vyarus:dropwizard-guicey:4.2.2&#39;</span>
<span class="o">}</span>
</pre></div>

<p>Now guicey itself is included and only one version declaration required:</p>
<div class="codehilite"><pre><span></span><span class="n">dependencyManagement</span> <span class="o">{</span>
    <span class="n">imports</span><span class="o">.</span><span class="na">mavenBom</span> <span class="s1">&#39;ru.vyarus:dropwizard-guicey:5.0.0&#39;</span> 
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s1">&#39;ru.vyarus:dropwizard-guicey&#39;</span>
<span class="o">}</span>
</pre></div>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Dropwizard bom was split into <code>dropwizard-bom</code> and <code>dropwizard-dependencies</code> so in order
to override dropwizard version you will need to provide two dependencies:
<div class="codehilite"><pre><span></span><span class="n">dependencyManagement</span> <span class="o">{</span>
    <span class="n">imports</span> <span class="o">{</span>
        <span class="n">mavenBom</span> <span class="s1">&#39;ru.vyarus:dropwizard-guicey:5.0.0&#39;</span> 
        <span class="c1">// override dropwizard version </span>
        <span class="n">mavenBom</span> <span class="s1">&#39;io.dropwizard:dropwizard-bom:2.0.1&#39;</span>
        <span class="n">mavenBom</span> <span class="s1">&#39;io.dropwizard:dropwizard-dependencies:2.0.1&#39;</span> 
    <span class="o">}</span>
<span class="o">}</span>
</pre></div></p>
</div>
<h2 id="java-11-compatibility">Java 11 compatibility<a class="headerlink" href="#java-11-compatibility" title="Permanent link">&para;</a></h2>
<p>Guicey is binary compatible with java 11. 
Declared <code>Automatic-Module-Name</code>: <code>dropwizard-guicey.core</code> (META-INF).</p>
<p>Still, guicey releases will be build with java 8, but CI tools will detect any future incompatibilities.</p>
<h2 id="fixes-issues">Fixes issues<a class="headerlink" href="#fixes-issues" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/xvik/dropwizard-guicey/issues/60">#60</a> Fix configuration bindings for recursive configuration object declarations</li>
</ul>
<h2 id="migration-guide">Migration guide<a class="headerlink" href="#migration-guide" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In dropwizard 2.0 <code>@Context</code> fields injection <a href="https://github.com/dropwizard/dropwizard/issues/2781">will not work for instances</a>.
As guicey register instances, you may be affected. Use <code>Provider&lt;Something&gt;</code> instead or rely
on <code>@Context</code> injection for method parameters which is working.  </p>
</div>
<h3 id="dropwizard-related">Dropwizard related<a class="headerlink" href="#dropwizard-related" title="Permanent link">&para;</a></h3>
<p>Jersey abstracted DI code and so most of it's api classes changed. 
Dropwizard deprecate <code>Bundle</code> interface.</p>
<p>Migration matrix:</p>
<table>
<thead>
<tr>
<th>Old class</th>
<th>New class</th>
</tr>
</thead>
<tbody>
<tr>
<td>org.glassfish.hk2.utilities.binding.AbstractBinder</td>
<td>org.glassfish.jersey.internal.inject.AbstractBinder</td>
</tr>
<tr>
<td>org.glassfish.hk2.utilities.Binder</td>
<td>org.glassfish.jersey.internal.inject.Binder</td>
</tr>
<tr>
<td>org.glassfish.hk2.api.Factory</td>
<td>java.util.function.Supplier</td>
</tr>
<tr>
<td>Factory used for Auth (user provider)</td>
<td>java.util.function.Function<ContainerRequest, ?></td>
</tr>
<tr>
<td>org.glassfish.jersey.server.internal.process.AsyncContext</td>
<td>org.glassfish.jersey.server.AsyncContext</td>
</tr>
<tr>
<td>org.glassfish.jersey.server.internal.inject.AbstractValueFactoryProvider</td>
<td>org.glassfish.jersey.server.internal.inject.AbstractValueParamProvider</td>
</tr>
<tr>
<td>org.glassfish.jersey.server.spi.internal.ValueFactoryProvider</td>
<td>org.glassfish.jersey.server.spi.internal.ValueParamProvider</td>
</tr>
<tr>
<td>org.glassfish.hk2.api.InjectionResolver</td>
<td>org.glassfish.jersey.internal.inject.InjectionResolver</td>
</tr>
<tr>
<td>io.dropwizard.Bundle</td>
<td>io.dropwizard.ConfiguredBundle (note that interface methods are default now and may not be implemented)</td>
</tr>
<tr>
<td>io.dropwizard.util.Size</td>
<td>io.dropwizard.util.DataSize</td>
</tr>
<tr>
<td>org.glassfish.hk2.api.ServiceLocator</td>
<td>org.glassfish.jersey.internal.inject.InjectionManager</td>
</tr>
<tr>
<td>ru.vyarus.dropwizard.guice.module.installer.feature.jersey.HK2Managed</td>
<td>ru.vyarus.dropwizard.guice.module.installer.feature.jersey.JerseyManaged</td>
</tr>
</tbody>
</table>
<h3 id="guiceybundle">GuiceyBundle<a class="headerlink" href="#guiceybundle" title="Permanent link">&para;</a></h3>
<p>As most of guicey initialization was moved into configuration dropwizard phase,
you will have to change all <code>GuiceyBundle</code>'s.</p>
<p>It now contains 2 methods (in accordance with dropwizard phases):</p>
<ul>
<li><code>void initialize(GuiceyBootstrap bootstrap)</code></li>
<li><code>void run(GuiceyEnvironment environment)</code> </li>
</ul>
<p>Move all registrations (extensions, modules, bundles) into first method. Guice modules may still be registered in 
<code>run</code> phase (for simplicity as guicey modules often required configuration values). </p>
<h3 id="multiple-instances-registration-bundles-modules">Multiple instances registration (bundles, modules)<a class="headerlink" href="#multiple-instances-registration-bundles-modules" title="Permanent link">&para;</a></h3>
<p>Before, guicey allow only one instance of type. So if you register (possibly in different bundles) </p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">modules</span><span class="o">(</span><span class="k">new</span> <span class="n">MyModule</span><span class="o">(),</span> <span class="k">new</span> <span class="n">MyModule</span><span class="o">())</span>
</pre></div>

<p>You could be sure that only one module (<code>MyModule</code>) instance is used.</p>
<p>Now, guicey will register all provided instances. This allows you to avoid
workarounds when multiple instances were indeed required, but may bring unexpected
behaviour if you rely on previous instance policy for deduplication (assure that only one instance would be used even
if registered in multiple places).</p>
<p>You can recover previous behaviour with:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">duplicateConfigDetector</span><span class="o">(</span><span class="k">new</span> <span class="n">LegacyModeDuplicatesDetector</span><span class="o">())</span>
</pre></div>

<p>Or you can simply properly implement equals method. For example, if you want only one instance of
some guice module to be used then implement it's equals as </p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyModule</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>
    <span class="o">...</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="kd">final</span> <span class="n">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">getClass</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="n">obj</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>Special base classes provided with already implementing proper equals:
<code>UniqueGuiceyBundle</code> and <code>UniqueModule</code> for guicey bundles and guice modules accordingly. </p>
<p>For 3<sup>rd</sup> party modules (where you can't implement equals) custom duplicates detector could be implemented:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">duplicateConfigDetector</span><span class="o">((</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">registered</span><span class="o">,</span> <span class="n">Object</span> <span class="n">newItem</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
     <span class="k">if</span> <span class="o">(</span><span class="n">newItem</span> <span class="n">isntanceof</span> <span class="n">Some3rdPartyModule</span><span class="o">)</span> <span class="o">{</span>
         <span class="c1">// decide if item collide with provided registered instances (of the same type)</span>
         <span class="k">return</span> <span class="n">detectedDuplicate</span> <span class="c1">// instance that registered is duplicate to or null to accept item</span>
     <span class="o">}</span>           
     <span class="c1">// allow instance registration</span>
     <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>    
<span class="o">})</span>
</pre></div>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use <code>.printDiagnosticReport()</code> to see all accepted configuration instances.</p>
</div>
<h3 id="guicey-bindings-analysis">Guicey bindings analysis<a class="headerlink" href="#guicey-bindings-analysis" title="Permanent link">&para;</a></h3>
<p>By default, guicey now analyze bindings from registered guice modules. This may lead
to unexpected extensions appearance. For example, if you have some resource directly
registered</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">bind</span><span class="o">(</span><span class="n">MyResources</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>

<p>It will now be recognized and installed as extensions. This affects all supported extension types.</p>
<p>Disables are also applied now for such extensions. So if you disable extension, directly bound in guice module
with <code>.disableExtensions(MyResources.class)</code>, guicey will remove binding (extension will not appear in injector). </p>
<p>Before, modules disabling <code>.disableModule(MyModule.class)</code> would disable only directly 
registered modules (registered with <code>.modules(new MyModule())</code>), now it will find and disable
also all transitive modules. For example,</p>
<div class="codehilite"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyModule</span> <span class="kd">extends</span> <span class="n">AbstractModule</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">install</span><span class="o">(</span><span class="k">new</span> <span class="n">OtherMyModule</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>     

<span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">.</span><span class="na">disableModules</span><span class="o">(</span><span class="n">OtherMyModule</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>    
</pre></div>

<p>will detect and remove all bindings of <code>OtherMyModule</code> (and all possible transitive module registrations).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use new guice report <code>.pringGuiceBindings()</code> to see all actually registered modules
and recognized extensions. </p>
</div>
<p>All new guice related behaviours could be disabled with option:</p>
<div class="codehilite"><pre><span></span><span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="n">GuiceyOptions</span><span class="o">.</span><span class="na">AnalyzeModules</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>
</pre></div>

<h3 id="test-hooks">Test hooks<a class="headerlink" href="#test-hooks" title="Permanent link">&para;</a></h3>
<p>If you were using guicey hooks for testing, then you will have to rename:</p>
<ul>
<li><code>GuiceyConfigurationRule</code> into <code>GuiceyHooksRule</code></li>
<li><code>@UseGuiceyConfiguration</code> (spock extension) into <code>@UseGuiceyHooks</code></li>
</ul>
<h3 id="removed-options">Removed options<a class="headerlink" href="#removed-options" title="Permanent link">&para;</a></h3>
<p><code>GuiceBundle.builder()#useWebInstallers()</code> was removed because <code>WebInstallersBundle</code> is 
activated by default and so you don't need to activate it anymore.</p>
<p>If you were using <code>GuiceyOptions.ConfigureFromDropwizardBundles</code> then consider using
<code>GuiceyBundle</code> now instead of combined dropwizard bundle (as guicey bundle is not limiting replacement now).</p>
<p>If you were using <code>GuiceyOptions.BindConfigurationInterfaces</code> then just annotate configuration
interfaces injection points with <code>@Config</code> (interface bindings are qualified).</p>
<h3 id="reporting_1">Reporting<a class="headerlink" href="#reporting_1" title="Permanent link">&para;</a></h3>
<p>If you were using <code>DiagnosticBundle</code> directly it is now <code>ConfigurationDiagnostic</code> listener.</p>
<p><code>DebugGuiceyLifecycle</code> was renamed to <code>LifecycleDiagnostic</code></p>
<p>All reports were moved into top-level package "debug".  </p>
<p>You don't need to enable guice statistics (injector creation) logs manually now: they would be 
intercepted automatically and show under diagnostics stats sub reprot (<code>.printDiagnosticReport()</code>)</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2014-2019 Vyacheslav Rusakov
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/xvik" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/vyarus" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-93174150-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>