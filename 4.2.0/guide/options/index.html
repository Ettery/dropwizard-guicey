



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Dropwizard guice integration">
      
      
        <link rel="canonical" href="https://xvik.github.io/dropwizard-guicey/4.2.0/guide/options/">
      
      
        <meta name="author" content="Vyacheslav Rusakov">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.2">
    
    
      
        <title>Options - Dropwizard-guicey</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.8d40d89b.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#options" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://xvik.github.io/dropwizard-guicey/4.2.0" title="Dropwizard-guicey" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Dropwizard-guicey
              </span>
              <span class="md-header-nav__topic">
                Options
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/xvik/dropwizard-guicey/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      dropwizard-guicey
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Dropwizard-guicey
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/xvik/dropwizard-guicey/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      dropwizard-guicey
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../concepts/" title="Concepts overview" class="md-nav__link">
      Concepts overview
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      User guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        User guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lifecycle/" title="Integration lifecycle" class="md-nav__link">
      Integration lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../injector/" title="Injector" class="md-nav__link">
      Injector
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../module-autowiring/" title="Module autowiring" class="md-nav__link">
      Module autowiring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bindings/" title="Bindings" class="md-nav__link">
      Bindings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scan/" title="Classpath scan" class="md-nav__link">
      Classpath scan
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installers/" title="Installers" class="md-nav__link">
      Installers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ordering/" title="Ordering" class="md-nav__link">
      Ordering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bundles/" title="Bundles (Guicey)" class="md-nav__link">
      Bundles (Guicey)
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Options
      </label>
    
    <a href="./" title="Options" class="md-nav__link md-nav__link--active">
      Options
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#usage" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-options" title="Custom options" class="md-nav__link">
    Custom options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#options-lookup" title="Options lookup" class="md-nav__link">
    Options lookup
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-conversions" title="Supported conversions" class="md-nav__link">
    Supported conversions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-properties" title="System properties" class="md-nav__link">
    System properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug" title="Debug" class="md-nav__link">
    Debug
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-lookup" title="Custom lookup" class="md-nav__link">
    Custom lookup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../diagnostic/" title="Diagnostic" class="md-nav__link">
      Diagnostic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../events/" title="Lifecycle events" class="md-nav__link">
      Lifecycle events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../web/" title="Web" class="md-nav__link">
      Web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../test/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dg-migration/" title="Migration from dropwizard-guice" class="md-nav__link">
      Migration from dropwizard-guice
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Installers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Installers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/resource/" title="Resource" class="md-nav__link">
      Resource
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/task/" title="Task" class="md-nav__link">
      Task
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/managed/" title="Managed" class="md-nav__link">
      Managed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/lifecycle/" title="Lifecycle" class="md-nav__link">
      Lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/healthcheck/" title="Health check" class="md-nav__link">
      Health check
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/jersey-ext/" title="Jersey extension" class="md-nav__link">
      Jersey extension
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/jersey-feature/" title="Jersey feature" class="md-nav__link">
      Jersey feature
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/eager/" title="Eager singleton" class="md-nav__link">
      Eager singleton
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/plugin/" title="Plugin" class="md-nav__link">
      Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/servlet/" title="Web servlet" class="md-nav__link">
      Web servlet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/filter/" title="Web filter" class="md-nav__link">
      Web filter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../installers/listener/" title="Web listener" class="md-nav__link">
      Web listener
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/authentication/" title="Authentication" class="md-nav__link">
      Authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/governator/" title="Governator" class="md-nav__link">
      Governator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/hibernate/" title="Hibernate" class="md-nav__link">
      Hibernate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/eventbus/" title="EventBus" class="md-nav__link">
      EventBus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/jdbi/" title="JDBI" class="md-nav__link">
      JDBI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Extras
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Extras
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/admin-rest/" title="Admin REST" class="md-nav__link">
      Admin REST
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/bom/" title="BOM" class="md-nav__link">
      BOM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/eventbus/" title="Guava EventBus" class="md-nav__link">
      Guava EventBus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/jdbi/" title="JDBI" class="md-nav__link">
      JDBI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extras/spa/" title="SPA" class="md-nav__link">
      SPA
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/compatibility/" title="Compatibility" class="md-nav__link">
      Compatibility
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/history/" title="Release notes" class="md-nav__link">
      Release notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#usage" title="Usage" class="md-nav__link">
    Usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-options" title="Custom options" class="md-nav__link">
    Custom options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#options-lookup" title="Options lookup" class="md-nav__link">
    Options lookup
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-conversions" title="Supported conversions" class="md-nav__link">
    Supported conversions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-properties" title="System properties" class="md-nav__link">
    System properties
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug" title="Debug" class="md-nav__link">
    Debug
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-lookup" title="Custom lookup" class="md-nav__link">
    Custom lookup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/xvik/dropwizard-guicey/edit/master/src/doc/docs/guide/options.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="options">Options<a class="headerlink" href="#options" title="Permanent link">&para;</a></h1>
<p>Options are low level configurations. In contrast to dropwizard configuration (file), which is user specific,
options are set during development and represent developer decisions. Often, options allow to change opinionated default behaviours.</p>
<p>Options are declared with enums. Enums used to naturally group options (also cause pretty reporting). 
Enums must implement <code>Option</code> interface (this makes enum declaration more verbose (because it is impossible to use abstract class in enum),
but provides required option info).</p>
<p>Guicey use options to share guice bundle configurations (configured packages to scan, search commands enabling etc) through <code>GuiceyOptions</code> enum
(for simplicity, main guicey options usages are already implemented as shortcut methods in guice bundle).
Another use is in web installers to change default behaviour though <code>InstallersOptions</code> enum. </p>
<p>Custom options may be defined for 3<sup>rd</sup> party bundle or even application. Options is a general mechanism providing configuration and access points with 
standard reporting (part of <a href="../diagnostic/">diagnostic reporting</a>). It may be used as feature triggers (like guicey do), to enable debug behaviour or to specialize
application state in tests (just to name a few).</p>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h2>
<p>Options may be set only in main GuiceBundle using <code>.option</code> method. This is important to let configuration parts to see the same values.
For example, if guicey bundles would be allowed to change options then one bundles would see one value and other bundles - different value and,
for sure, this will eventually lead to inconsistent behaviour.</p>
<p>Option could not be set to null. Option could be null only if it's default value is null and custom value not set.
Custom option value is checked for compatibility with option type (from option definition) and error thrown if does not match.
Of course, type checking is limited to top class and generics are ignored (so <code>List&lt;String&gt;</code> could not be specified and so
can't be checked), but it's a compromise between complexity and easy of use (the same as <code>Enum &amp; Option</code> pair).</p>
<p>Options could be accessed by:</p>
<ul>
<li>Guicey bundles using <a href="../bundles/#options"><code>bootstrap.option()</code></a></li>
<li>Installer by implementing <a href="../installers/#options"><code>WithOptions</code></a> interface </li>
<li>Any guice bean could inject <a href="../bindings/#options"><code>Options</code></a> bean and use it to access options.</li>
<li>Guice module could access options by implementing <a href="../module-autowiring/#options"><code>OptionsAwareModule</code></a> marker interface</li>
</ul>
<p>Guicey tracks options definition and usage and report all used options as part of <a href="../diagnostic/">diagnostic reporting</a>.
Pay attention that defined (value set) but not used (not consumed) options are marked as NOT_USED to indicate possibly redundant options.</p>
<p>Actual application may use options in different time and so option may be defined as NOT_USE even if its actually "not yet" used.
Try to consume options closer to actual usage to let user be aware if option not used with current configuration. For example,
GuiceyOptions.BindConfigurationInterfaces will not appear in report at all if no custom configuration class used.</p>
<h2 id="custom-options">Custom options<a class="headerlink" href="#custom-options" title="Permanent link">&para;</a></h2>
<p>Options must be enum and implement <code>Option</code> interface, like this:</p>
<div class="codehilite"><pre><span></span><span class="kd">enum</span> <span class="n">MyOptions</span> <span class="kd">implements</span> <span class="n">Option</span> <span class="o">{</span>

    <span class="n">DoExtraWork</span><span class="o">(</span><span class="n">Boolean</span><span class="o">,</span> <span class="kc">true</span><span class="o">),</span>
    <span class="n">EnableDebug</span><span class="o">(</span><span class="n">Boolean</span><span class="o">,</span> <span class="kc">false</span><span class="o">),</span>
    <span class="n">InternalConfig</span><span class="o">(</span><span class="n">String</span><span class="o">[],</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="s">&quot;one&quot;</span><span class="o">,</span> <span class="s">&quot;two&quot;</span><span class="o">,</span> <span class="s">&quot;three&quot;</span><span class="o">});</span>

    <span class="kd">private</span> <span class="n">Class</span> <span class="n">type</span>
    <span class="kd">private</span> <span class="n">Object</span> <span class="n">value</span>

    <span class="c1">// generic used only to check type - value correctness</span>
    <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="nf">SampleOptions</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">type</span><span class="o">,</span> <span class="n">T</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">type</span> <span class="o">=</span> <span class="n">type</span>
        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Class</span> <span class="nf">getType</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">type</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Object</span> <span class="nf">getDefaultValue</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>Each enum value declares option with exact type and default value. Option type is not limited, but implement proper toString for custom object used as option value.
This will require for pretty reporting, as simple toString used for option value (except collections and arrays are rendered as []).</p>
<p>Now you can use option, for example, in bean:</p>
<div class="codehilite"><pre><span></span><span class="kn">import static</span> <span class="nn">MyOptions.DoExtraWork</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyBean</span> <span class="o">{</span>
    <span class="nd">@Inject</span> <span class="n">Options</span> <span class="n">options</span><span class="o">;</span>

    <span class="n">pulic</span> <span class="kt">void</span> <span class="nf">someMethod</span><span class="o">()</span> <span class="o">{</span>
        <span class="o">...</span> 
        <span class="k">if</span> <span class="o">(</span><span class="n">options</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">DoExtraWork</span><span class="o">))</span> <span class="o">{</span>
            <span class="c1">// extra work impl</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>To provide custom option value:</p>
<div class="codehilite"><pre><span></span>    <span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="n">DoExtraWork</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>
        <span class="o">...</span>
</pre></div>

<h2 id="options-lookup">Options lookup<a class="headerlink" href="#options-lookup" title="Permanent link">&para;</a></h2>
<p>Guicey provides simple mapping utility to map properties to system properties, environment variables 
or simply bind from string (obtained manually somewhere). </p>
<div class="codehilite"><pre><span></span><span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
    <span class="o">...</span>
    <span class="o">.</span><span class="na">options</span><span class="o">(</span><span class="k">new</span> <span class="n">OptionsMapper</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">prop</span><span class="o">(</span><span class="s">&quot;myprop&quot;</span><span class="o">,</span> <span class="n">Myoptions</span><span class="o">.</span><span class="na">SomeOption</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">env</span><span class="o">(</span><span class="s">&quot;STAGE&quot;</span><span class="o">,</span> <span class="n">GuiceyOptions</span><span class="o">.</span><span class="na">InjectorStage</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">string</span><span class="o">(</span><span class="n">Myoptions</span><span class="o">.</span><span class="na">SomeOtherOption</span><span class="o">,</span> <span class="s">&quot;property value&quot;</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">map</span><span class="o">())</span> 
    <span class="o">.</span><span class="na">build</span><span class="o">()</span>                
</pre></div>

<p>Here:</p>
<ul>
<li><code>Myoptions.SomeOption</code> could be changed with "myprop" system property (<code>-Dmyprop=something</code>)</li>
<li><code>GuiceyOptions.InjectorStage</code> could be changed with environment variable "STAGE"</li>
<li><code>Myoptions.SomeOtherOption</code> set from string (string could be obtained somewhere else manually) </li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Missed mappings are ignored: e.g. if system property or environment variable is not 
defined - option will remain with default value (null will not be set!)</p>
</div>
<h3 id="supported-conversions">Supported conversions<a class="headerlink" href="#supported-conversions" title="Permanent link">&para;</a></h3>
<div class="admonition note">
<p>Each option declares required option type</p>
</div>
<p>Mapper could automatically convert string to:</p>
<ul>
<li>String</li>
<li>Boolean</li>
<li>Integer</li>
<li>Double</li>
<li>Short</li>
<li>Byte</li>
<li>Enum constant: <ul>
<li>If option type is exact enum then value must be constant name</li>
<li>If option type is generic <code>Enum</code> then value must be 'fullEnumClass.constantName'</li>
</ul>
</li>
<li>Array or any type (from above): values must be separated by comma ("one, two, three")</li>
<li>EnumSet: value must be comma separated list with fully qualified enum constants ('fullEnumClass.constantName')   </li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use sting conversion directly somewhere else, if required:
<code>StringConverter.convert(TargetType, stringValue)</code></p>
</div>
<p>Exception is thrown when type is not supported for conversion. In this case use manual converter:</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="n">OptionsMapper</span><span class="o">()</span>
            <span class="o">.</span><span class="na">prop</span><span class="o">(</span><span class="s">&quot;myprop&quot;</span><span class="o">,</span> <span class="n">Myoptions</span><span class="o">.</span><span class="na">SomeOption</span><span class="o">,</span> <span class="n">val</span> <span class="o">-&gt;</span> <span class="n">convertVal</span><span class="o">(</span><span class="n">val</span><span class="o">))</span>
            <span class="o">.</span><span class="na">map</span><span class="o">()</span>
</pre></div>

<p>Converter is actually any <code>java.util.Function</code> (here, lambda with method call (<code>::convertVal</code>)).</p>
<h3 id="system-properties">System properties<a class="headerlink" href="#system-properties" title="Permanent link">&para;</a></h3>
<p>As shown before, you can bind single system property to option. But you can allso allow
to set any option with system property:</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="n">OptionsMapper</span><span class="o">().</span><span class="na">props</span><span class="o">().</span><span class="na">map</span><span class="o">()</span>
</pre></div>

<p>It will bind all properties in format: <code>option.enumClasName.enumValue</code>.
For example, <code>-Doption.ru.vyarus.dropwizard.guice.GuiceyOptions.UseHkBridge=true</code> </p>
<p>Different prefix could be used: <code>.props(&quot;myprefix&quot;)</code> </p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All properties with matched prefix must be mappable to option (target enum exists),
otherwise error will be thrown.</p>
</div>
<p>If any property requires custom value conversion then bind it <em>before</em> with converter
and it will be ignored during mass mapping by prefix:</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="n">OptionsMapper</span><span class="o">()</span>
        <span class="o">.</span><span class="na">prop</span><span class="o">(</span><span class="s">&quot;option.ru.vyarus.dropwizard.guice.GuiceyOptions.UseHkBridge&quot;</span><span class="o">,</span> 
                <span class="n">GuiceyOptions</span><span class="o">.</span><span class="na">UseHkBridge</span><span class="o">,</span> <span class="n">val</span> <span class="o">-</span> <span class="o">&gt;</span> <span class="n">convert</span><span class="o">(</span><span class="n">val</span><span class="o">))</span>
        <span class="o">.</span><span class="na">props</span><span class="o">()</span>
        <span class="o">.</span><span class="na">map</span><span class="o">()</span>
</pre></div>

<h3 id="debug">Debug<a class="headerlink" href="#debug" title="Permanent link">&para;</a></h3>
<p>You can enable mapped options print with <code>.printMappings()</code>:</p>
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="n">OptionsMapper</span><span class="o">()</span>
            <span class="o">.</span><span class="na">prop</span><span class="o">(</span><span class="s">&quot;myprop&quot;</span><span class="o">,</span> <span class="n">Myoptions</span><span class="o">.</span><span class="na">SomeOption</span><span class="o">,</span> <span class="n">val</span> <span class="o">-&gt;</span> <span class="n">convertVal</span><span class="o">(</span><span class="n">val</span><span class="o">))</span>
            <span class="o">.</span><span class="na">printMappings</span><span class="o">()</span>
            <span class="o">.</span><span class="na">map</span><span class="o">()</span>
</pre></div>

<p>When enabled, all mapped options will be printed to console (logger is not used becuase it's not yet initialized).</p>
<p>Example output:
<div class="codehilite"><pre><span></span>    env: VAR                   Opts.OptInt = 1
    prop: foo                  Opts.OptStr = bar
                               Opts.OptBool = true
</pre></div></p>
<p>for mapper:
<div class="codehilite"><pre><span></span><span class="k">new</span> <span class="n">OptionsMapper</span><span class="o">()</span>
        <span class="o">.</span><span class="na">printMappings</span><span class="o">()</span>
        <span class="o">.</span><span class="na">env</span><span class="o">(</span><span class="s">&quot;VAR&quot;</span><span class="o">,</span> <span class="n">Opts</span><span class="o">.</span><span class="na">OptInt</span><span class="o">)</span>
        <span class="o">.</span><span class="na">env</span><span class="o">(</span><span class="s">&quot;VAR2&quot;</span><span class="o">,</span> <span class="n">Opts</span><span class="o">.</span><span class="na">OptDbl</span><span class="o">)</span>
        <span class="o">.</span><span class="na">prop</span><span class="o">(</span><span class="s">&quot;foo&quot;</span><span class="o">,</span> <span class="n">Opts</span><span class="o">.</span><span class="na">OptStr</span><span class="o">)</span>
        <span class="o">.</span><span class="na">prop</span><span class="o">(</span><span class="s">&quot;foo2&quot;</span><span class="o">,</span> <span class="n">Opts</span><span class="o">.</span><span class="na">OptShort</span><span class="o">)</span>
        <span class="o">.</span><span class="na">string</span><span class="o">(</span><span class="n">Opts</span><span class="o">.</span><span class="na">OptBool</span><span class="o">,</span> <span class="s">&quot;true&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">map</span><span class="o">()</span>
</pre></div></p>
<p>Here "VAR2" env. variable and "foo2" system property wasn't declared and so not mapped. </p>
<h3 id="custom-lookup">Custom lookup<a class="headerlink" href="#custom-lookup" title="Permanent link">&para;</a></h3>
<p>You can directly specify map of options (<code>.options(Map&lt;Enum, Object&gt;)</code>) or write your own lookup mechanism:</p>
<div class="codehilite"><pre><span></span>    <span class="n">GuiceBundle</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">options</span><span class="o">(</span><span class="k">new</span> <span class="n">MyOptionsLookup</span><span class="o">().</span><span class="na">getOptions</span><span class="o">())</span>
        <span class="o">...</span>
</pre></div>

<div class="admonition note">
<p><code>.options()</code> method contract simplified for just <code>Enum</code>, excluding <code>Option</code> for 
simpler usage, but still only option enums must be provided</p>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../bundles/" title="Bundles (Guicey)" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Bundles (Guicey)
              </span>
            </div>
          </a>
        
        
          <a href="../diagnostic/" title="Diagnostic" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Diagnostic
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2014-2018 Vyacheslav Rusakov
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/xvik" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/vyarus" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:"../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-93174150-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>